<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://stingarv2.readthedocs.io/install/run_quickstart.html" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Run Installation Script - STINGAR Installation Guide</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/buttons.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Run Installation Script";
        var mkdocs_page_input_path = "install/run_quickstart.md";
        var mkdocs_page_url = "/install/run_quickstart.html";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> STINGAR Installation Guide
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">STINGAR</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../index.html">Installation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Establish Prerequisites</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../requirements/membership.html">Join STINGAR Community</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../requirements/hardware.html">Confirm Hardware Requirements</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../requirements/software.html">Install Required Software</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../requirements/confirm.html">Verify Software Installation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Install STINGAR</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="run_quickstart.html">Run Installation Script</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#before-you-start-enter-information-about-your-stingar-server-in-the-box-below">Before you start, enter information about your STINGAR server in the box below.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#then-follow-the-instructions-below">Then follow the instructions below...</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="launch.html">Launch STINGAR</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Prepare Honeypot Host Machine</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../prepare_hp_host/register_in_stingar.html">Register Machine in STINGAR</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../prepare_hp_host/setup_host.html">Setup Host Machine</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Deploy a Honeypot</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../deploy_hp/launch.html">Launch STINGAR Deployment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../deploy_hp/gen_sample_attacks.html">Generate Sample Attack Data</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">View Attack Information</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../attack_analysis/ui.html">Via STINGAR User Interface</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../attack_analysis/kibana.html">Via Kibana</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../attack_analysis/api.html">Via STINGAR API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../attack_analysis/es.html">Via Elasticsearch</a>
                </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../config_files.html">About the Configuration Files</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">STINGAR Installation Guide</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>STINGAR &raquo;</li>
          <li>Install STINGAR &raquo;</li><li>Run Installation Script</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="download-install-stingar-application">Download &amp; Install STINGAR Application</h1>
<h3 id="before-you-start-enter-information-about-your-stingar-server-in-the-box-below">Before you start, enter information about your STINGAR server in the box below.</h3>
<p><b><span data-bind-user-defined-values="STINGAR_HOSTNAME">STINGAR_HOSTNAME</span>:  Do not include the https prefix.</b></p>
<div style="border: solid 1px;border-radius:3px;padding:2em;margin-bottom:2em;background-color:#fffff0;">
  
        <style>
            label.user-defined-values {
                width: 30%
            }

            input.user-defined-values[type=text] {
                width: 100%;
                padding: 12px 20px;
                margin: 8px 0;
                box-sizing: border-box;
                border: 1px solid black;
                display: inline-block;
            }
        </style>
        
                <label class="user-defined-values" for="STINGAR_HOSTNAME">STINGAR_HOSTNAME</label>
                <input class="user-defined-values" type="text" placeholder="Enter the name of your STINGAR server" id="STINGAR_HOSTNAME" />
                <script>
                    const stingar_hostname = document.getElementById('STINGAR_HOSTNAME');
                    stingar_hostname.value = window.localStorage.getItem('STINGAR_HOSTNAME');
                    stingar_hostname.oninput = function(e) {
                        const value = e.target.value;
                        window.localStorage.setItem('STINGAR_HOSTNAME', value);
                        document.querySelectorAll('[data-bind-user-defined-values="STINGAR_HOSTNAME"]').forEach(function(element, _) {
                            if (value == '') {
                                element.innerHTML = 'STINGAR_HOSTNAME';
                            } else {
                                element.innerHTML = value;
                            }
                        });
                    };
                </script>
            
                <label class="user-defined-values" for="STINGAR_ADMIN_USER">STINGAR_ADMIN_USER</label>
                <input class="user-defined-values" type="text" placeholder="Enter the name of the user with root access on the STINGAR server" id="STINGAR_ADMIN_USER" />
                <script>
                    const stingar_admin_user = document.getElementById('STINGAR_ADMIN_USER');
                    stingar_admin_user.value = window.localStorage.getItem('STINGAR_ADMIN_USER');
                    stingar_admin_user.oninput = function(e) {
                        const value = e.target.value;
                        window.localStorage.setItem('STINGAR_ADMIN_USER', value);
                        document.querySelectorAll('[data-bind-user-defined-values="STINGAR_ADMIN_USER"]').forEach(function(element, _) {
                            if (value == '') {
                                element.innerHTML = 'STINGAR_ADMIN_USER';
                            } else {
                                element.innerHTML = value;
                            }
                        });
                    };
                </script>
            
                <label class="user-defined-values" for="STINGAR_REGISTRY_USER">STINGAR_REGISTRY_USER</label>
                <input class="user-defined-values" type="text" placeholder="Enter the username provided by the STINGAR team that lets you download STINGAR from a registry." id="STINGAR_REGISTRY_USER" />
                <script>
                    const stingar_registry_user = document.getElementById('STINGAR_REGISTRY_USER');
                    stingar_registry_user.value = window.localStorage.getItem('STINGAR_REGISTRY_USER');
                    stingar_registry_user.oninput = function(e) {
                        const value = e.target.value;
                        window.localStorage.setItem('STINGAR_REGISTRY_USER', value);
                        document.querySelectorAll('[data-bind-user-defined-values="STINGAR_REGISTRY_USER"]').forEach(function(element, _) {
                            if (value == '') {
                                element.innerHTML = 'STINGAR_REGISTRY_USER';
                            } else {
                                element.innerHTML = value;
                            }
                        });
                    };
                </script>
            
</div>

<h3 id="then-follow-the-instructions-below">Then follow the instructions below...</h3>
<p>You need to be logged onto your STINGAR server: <b><span data-bind-user-defined-values="STINGAR_HOSTNAME">STINGAR_HOSTNAME</span></b> as <b><span data-bind-user-defined-values="STINGAR_ADMIN_USER">STINGAR_ADMIN_USER</span></b>.</p>
<pre><code>ssh <span data-bind-user-defined-values="STINGAR_ADMIN_USER">STINGAR_ADMIN_USER</span>@<span data-bind-user-defined-values="STINGAR_HOSTNAME">STINGAR_HOSTNAME</span>
</code></pre>
<p>While logged onto this server as <span data-bind-user-defined-values="STINGAR_ADMIN_USER">STINGAR_ADMIN_USER</span>, follow the instructions below to step through the process to download STINGAR &amp; run a script to install &amp; configure it.</p>
<h1 id="download-quickstart-script">Download QuickStart Script</h1>
<p>The STINGAR QuickStart script is available in Duke's public gitlab repository. The script will prompt you for configuration specs and will then do all the work to download, install &amp; configure your implementation of STINGAR. When done, you will be able to enter your STINGAR server hostname in a browser (<b>https://<span data-bind-user-defined-values="STINGAR_HOSTNAME">STINGAR_HOSTNAME</span></b>) to access your running implementation of STINGAR.  Run the following command to download the script:</p>
<div style="border:solid #e1e4e5 1px;background-color:#f8f8f8;padding:1em 1.2em;border-radius:3px;font-size:12px;font-family:monospace;color:#333;overflow:auto;white-space: nowrap;">
  <div style="display:block;margin:.5em 0;">git clone https://gitlab.oit.duke.edu/stingar2-public/stingar-quickstart stingar</div>
  <div style="display:block;margin:.5em 0;">cd stingar</div>
</div>

<p>The command above creates a directory named 'stingar' in the root directory of <span data-bind-user-defined-values="STINGAR_ADMIN_USER">STINGAR_ADMIN_USER</span> &amp; pulls down all files needed to install STINGAR, saving them to this new 'stingar' directory.</p>
<h1 id="install-basic-ssl">Install Basic SSL</h1>
<p>To implement simple SSL certification for STINGAR, you may choose to create public/private keys for STINGAR using the following commands:
First, from within the stingar directory, create a 'certs' directory in which the keys will be stored.</p>
<div style="border:solid #e1e4e5 1px;background-color:#f8f8f8;padding:1em 1.2em;border-radius:3px;font-size:12px;font-family:monospace;color:#333;overflow:auto;white-space: nowrap;">
  mkdir certs
</div>

<div style="margin:.8em 0;">Next create the keys using the following command.</div>

<div style="border:solid #e1e4e5 1px;background-color:#f8f8f8;padding:1em 1.2em;border-radius:3px;font-size:12px;font-family:monospace;color:#333;overflow:auto;white-space: nowrap;">
  openssl req -subj /CN=<span data-bind-user-defined-values="STINGAR_HOSTNAME">STINGAR_HOSTNAME</span> -x509 -newkey rsa:4096 -nodes -keyout certs/key.pem -out certs/cert.pem -days 365
</div>

<p><br/>
Verify that the two expected files were created in the certs directory:</p>
<div style="border:solid #e1e4e5 1px;background-color:#f8f8f8;padding:1em 1.2em;border-radius:3px;font-size:12px;font-family:monospace;color:#333;overflow:auto;white-space: nowrap;">
  ls certs
</div>

<p>You should find these 2 files in that directory:</p>
<ul>
<li>cert.pem</li>
<li>key.pem</li>
</ul>
<h1 id="run-the-quickstart-script">Run the QuickStart Script</h1>
<p>At this point you should have docker, docker-compose &amp; python3 installed on this server and the QuickStart script (file: configure_stingar.py) downloaded to the current directory.</p>
<p>You will need the password provided by the STINGAR team to retrieve STINGAR from the registry where the code resides. Contact the STINGAR team (<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#116;&#101;&#97;&#109;&#45;&#115;&#116;&#105;&#110;&#103;&#97;&#114;&#64;&#100;&#117;&#107;&#101;&#46;&#101;&#100;&#117;">&#116;&#101;&#97;&#109;&#45;&#115;&#116;&#105;&#110;&#103;&#97;&#114;&#64;&#100;&#117;&#107;&#101;&#46;&#101;&#100;&#117;</a>) if you don't have a STINGAR Registry account or do not know your username/password for it.</p>
<p>Now it's just a matter of running the script and responding to the prompts:</p>
<pre><code>python3 configure_stingar.py
</code></pre>
<style>
  .quickStartOutput {
    color: gray;
    font-style: italic;
  }
  .userInput {
    color: blue;
    font-style: underline;
    font-size: small;
    margin-left: 1em;
  }
</style>
<p>A sample script session is shown below (Input values for a default configuration appear in <span style="color:blue;">blue</span>.)</p>
<div style="border: solid 1px;border-radius 3px;background-color:#fffff0;padding:1em;">

  <div class="quickStartOutput">Checking if docker is installed...</div>
  <div class="quickStartOutput">Checking if docker-compose is installed...</div>

  <span class="quickStartOutput">
    Enter the URL where your STINGAR web app will be available. The domain must be resolvable. E.g.: sub.domain.tld or localhost/stingar.
    Domain: </span><span class="userInput"><span data-bind-user-defined-values="STINGAR_HOSTNAME">STINGAR_HOSTNAME</span></span>

  <span class="quickStartOutput">Please enter your SSL certificate path. [./certs]:</span><span class="userInput">[Return]</span>

  <span class="quickStartOutput">Do you wish to specify an alternate Docker registry? (y/n): [y]</span><span class="userInput">[Return]</span>

  <span class="quickStartOutput">Please enter the URL for the Docker registry: [stingarregistry.azurecr.io]</span><span class="userInput">[Return]</span>

  <span class="quickStartOutput">Please enter your Docker registry username:</span><span class="userInput"><span data-bind-user-defined-values="STINGAR_REGISTRY_USER">STINGAR_REGISTRY_USER</span></span>

  <span class="quickStartOutput">Please enter your Docker registry password:</span><span class="userInput">Enter the registry password that was provided to you by the STINGAR team</span> (Note: The password will not display.)

  <div class="quickStartOutput">Testing registry authentication...</div>
  <div class="quickStartOutput">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</div>
  <div class="quickStartOutput">Login Succeeded</div>
  <div class="quickStartOutput" style="color:green;">Authentication to stingarregistry.azurecr.io succeeded.</div>

  <span class="quickStartOutput">Do you wish to enable logging to a remote CIFv3 server? (y/n): [n] </span><span class="userInput">[Return]</span>

  <div class="quickStartOutput"><b>If you don't know what a CIF server is, or don't have one available, answer n or hit enter.</b></div>

  <div class="quickStartOutput">If you have a CIF server you wish indicators (IP, hash, url) from your honeypots to be submitted to (such as the STINGAR project, answer y to this question.</div>

  <b>If you answer y to this last question, you will be presented with three follow-up questions:</b>

  <div class="quickStartOutput"><b>Configuring for Collective Intelligence Framework (CIF)</b></div>

  <div class="quickStartOutput">Please enter the URL for the remote CIFv3 server:</div>
  <div class="quickStartOutput">Please enter the API token for the remote CIFv3 server:</div>
  <div class="quickStartOutput"> This token must have write privileges to the remote CIF instance.</div>
  <div class="quickStartOutput">Please enter a name you wish to be associated with your organization: </div>

  <div class="quickStartOutput">For more information about CIFv3 and its configuration, please refer to our [CIF documentation](https://csirtgadgets.com/collective-intelligence-framework/).</div>
</div>

<h1 id="quickstart-script-results">QuickStart Script Results</h1>
<p>Upon completion, the script should report that it has created three files:</p>
<ul>
<li><span style="color:green;">stingar.env</span></li>
<li><span style="color:green;">nginx.conf</span></li>
<li><span style="color:green;">docker-compose.yml</span></li>
</ul>
<h4></h4>
<p>These files define the way your instance of STINGAR appears &amp; functions. They may be modified to add or change the behavior and appearance of your implementation of STINGAR. More detailed information about these files is available <a href="../config_files.html">here</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../requirements/confirm.html" class="btn btn-neutral float-left" title="Verify Software Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="launch.html" class="btn btn-neutral float-right" title="Launch STINGAR">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../requirements/confirm.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="launch.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
